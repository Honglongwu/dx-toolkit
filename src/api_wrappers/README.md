## Wrapper generation for API routes
#### wrapper_table.json

This file is the canonical list of all API routes (for which wrapper needs to be generated). The file is a JSON array (all of whose elements are arrays themselves). This is what it looks like:
```json
[
   ....,
   [
        "/file-xxxx/upload",
        "fileUpload(req, objectId)",
        {
            "objectMethod": true,
            "retryable": true,
            "wikiLink": null
        }
    ],
    [
        "/file/new",
        "fileNew(req)",
        {
            "objectMethod": false,
            "retryable": false,
            "wikiLink": "http://wiki.dnanexus.com/API-Specification-v1.0.0/Files#API-method%3A-%2Ffile%2Fnew"
        }
    ],
    ...,
]
```
Each route is described by an array with exactly 3 elements:
 1. The first element is a string representing url of the route (relative to apiserver).
 2. The second element is a string representing how a route might be represented as a function in a dynamically typed language (it's utility is limited, and it can be generated by using 1st and 3rd element of the array - present for historical reasons).
 3. Third element is a hash with following fields:
   * ```objectMethod```: boolean; true if the route is called on a specific object ID (for example: ```/record-xxxx/describe```), false otherwise (e.g., it will be false for routes which are not bound to a specific object ID: ```/system/findJobs```, ```/record/new```, etc).
   * ```retryable```: boolean; true if the route is "safe" to retry for failed requests. This information is used by api_wrappers to decide when to retry a failed request.
   * ```wikiLink```: either null or a string; if a string, then it's the URL for documentation of the route. This information can be used to add wiki links in api wrapper documentation.

#### Auto-generating wrapper for your favorite language (by creating generateXXXXAPIWrappers.py file):
By convention we usually create a file ```generateXXXXAPIWrappers.py``` for each language we support. These are python scripts which reads ```wrapper_table.json``` from stdin, and spits out a language specific wrapper file on stdout.

*To add wrappers for your favorite language (say Ruby):* 
 * Create a file ```generateRubyAPIWrappers.py``` in the directory ```dx-toolkit/src/api_wrappers/```. This file is expected to read ```wrapper_table.json``` file from stdin, and spit out a .rb file (with relevant function definitions, etc) on stdout. Look at ```dx-toolkit/src/api_wrappers/generatePythonAPIWrappers.py``` for a template.
 * Update the ```api_wrapper``` make target in ```dx-toolkit/src/Makefile``` to build wrapper for Ruby. For example you may add something like this: ```cat api_wrappers/wrapper_table.json | api_wrappers/generateRubyAPIWrappers.py > dxruby/api.rb```
